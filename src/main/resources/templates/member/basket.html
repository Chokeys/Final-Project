<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>장바구니</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <!--웹 페이지 아이콘 변경-->
    <link rel="icon" th:href="@{/image/specialday.ico}">
    <!-- Google Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=DynaPuff&family=Permanent+Marker&display=swap"
        rel="stylesheet">
    <!--Bootstrap 용 CSS-->
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <!--CSS-->
    <link rel="stylesheet" th:href="@{/css/main.css}">
    <link rel="stylesheet" th:href="@{/css/basket/basket.css}">
    <!--Bootstrap 용 Icon CDN-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    <!-- font awesome용 css CDN  -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>
<body>

    <!--header 영역-->
    <header th:replace="~{header :: headerFragment}"></header>

    <h3>장바구니</h3>
    <section class="cart">
        <div class="cart__information">
            <input type="hidden" value="${login.userid}" id="login_userid">
            <ul>
                <li>장바구니 상품은 최대 30일간 저장됩니다.</li>
                <li>장바구니에서 확인해야하는 정보로 추후 수정</li>
            </ul>
        </div>
        <table class="cart__list">
            <form>
                <thead style="background-color: gainsboro;">
                    <tr>
                        <td>
                            <div class="all_check_input_div">
                                <input type="checkbox" class="all_check_input input_size_20" checked="checked">
                                <span class="all_chcek_span">전체선택</span>
                            </div>
                        </td>
                        <td>번호</td>
                        <td>인원수</td>
                        <td>클래스 이미지</td>
                        <td>클래스 신청 정보</td>
                        <td>결제 금액</td>
                    </tr>
                </thead>
                <tbody>
                  <form th:action="@{/member/basket.do}" method="post" id="form" name="frm">
                    <tr class="cart__list__detail" th:each="obj : ${list}">
                       <td><input type="checkbox" name="chk[]" th:value="${obj.no.longValue()}" checked="checked"></td>
                        <td >
                            <th:block th:each="no : ${#numbers.sequence(1,1)}" >
	                            <div th:text="${obj.no.longValue()}" class="unit_no" id="unit_no" name="unit_no" ></div>
                            </th:block>
                        </td>
                        <td th:text="${obj.cnt}" class="cnt" id="cnt"></td>
                        <td>
                            <img th:src="@{/member/basket(classcode=${mainImg})}">
                        </td> 
                        <!-- classcode를 이용 해서 클래스 image를 띄우는 법-->
                        <td >
                            <a th:text="${obj.title}" href="#" >수영 클래스</a>
                            <p th:text="${obj.classdate}" class="date"></p>
                            <p th:text="${obj.classstart}" class="starttime"></p>
                            <p th:text="${obj.classend}" class="endtime"></p>
                            <p th:text="${obj.classlavel}"  class="level"></p>
                            <h7 th:text="${obj.totalprice}" id="num1" value="num1" class="addprice"></h7><br /> 
                            <button type="submit" >옵션 수정</button>
                        </td>
                        <td >
                            <p  th:text="${obj.totalprice}" name="totalprice"></input><br>
                        </td>
                    </tr>
                    </form>
                    
                    <tr class="cart__list__detail3">
                        <td>총합금액</td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>
                            <span class="totalprice">30,000원</span><br>
                        </td>
                    </tr>
                    

                    <td colspan="6">
                        <!-- <form method="post" class="dropdown-item" id="deleteForm"
                        th:action="@{/member/basket.do(no=${obj.no} )}"> -->
                        <button onclick="deletePost()" class="cart__list__optionbtn" type="button" id="delBtn">선택상품 삭제</button>
                        <button class="openBtn" type="button">옵션수정</button>
                        <div class="modal hidden">
                            <div class="bg"></div>
                            <div class="modalBox">
                                    <p>수영 클래스</p>
                                    <p>일자: 2023-05-05</p>
                                    <p>시간: 18:00 ~ 20:00</p>
                                    <p>난이도 : 입문자</p>
                                    <p>신청 인원: 1명</p><hr />
                                    <p>가격: 15000</p>
                                <button class="closeBtn">수정</button>
                            </div>
                        </div>
                    <!-- </form> -->
                    </td>
                    
                    <td></td>
                    </tr>
                    </tfoot>
            </form>
        </table>
        <div class="cart__mainbtns">
            <button class="cart__bigorderbtn left" type="submit">쇼핑 계속하기</button>
            <input type="button" class="cart__bigorderbtn right" onclick="location.href='*/apply/insert.do';" value="결제화면으로" />
        </div>

        <script>

            /* 체크박스 전체 선택 */
        $(".all_check_input").on("click", function(){

            /* 체크박스 체크/해제 */
	    if($(".all_check_input").prop("checked")){
            $(".individual_cart_checkbox").attr("checked", true);
	    } else{
		$(".individual_cart_checkbox").attr("checked", false);
	    }
            });

        </script>
        




    </section>

    <!--footer 영역-->
    <footer th:replace="~{footer :: footerFragment}"></footer>

    <!--jQuery-->
    <script th:src="@{/js/jquery-3.6.4.min.js}"></script>
    <!--Bootstrap 용 js -->
    <script th:src="@{/js/bootstrap.bundle.min.js}"></script>
    <!--Main js-->
    <script th:src="@{/js/main.js}"></script>
</body>

</html>